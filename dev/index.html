<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>InfinityEngine.jl · InfinityEngine.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>InfinityEngine.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href><code>InfinityEngine.jl</code></a><ul class="internal"><li><a class="tocitem" href="#Running-the-module"><span>Running the module</span></a></li><li><a class="tocitem" href="#Accessing-the-database"><span>Accessing the database</span></a></li><li><a class="tocitem" href="#Resource-references-and-namespaces"><span>Resource references and namespaces</span></a></li><li><a class="tocitem" href="#Languages"><span>Languages</span></a></li></ul></li><li><a class="tocitem" href="items/">Items</a></li><li><a class="tocitem" href="dialogs/">Dialogs</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href><code>InfinityEngine.jl</code></a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href><code>InfinityEngine.jl</code></a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/plut/InfinityEngine.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="InfinityEngine.jl"><a class="docs-heading-anchor" href="#InfinityEngine.jl"><code>InfinityEngine.jl</code></a><a id="InfinityEngine.jl-1"></a><a class="docs-heading-anchor-permalink" href="#InfinityEngine.jl" title="Permalink"></a></h1><p>This package provides an interface to Bioware&#39;s Infinity Engine games databases.</p><div class="admonition is-warning"><header class="admonition-header">Support</header><div class="admonition-body"><p>Currently, only BG(2)EE games (including EET) are supported. Supporting other games is a long-term goal.</p></div></div><h2 id="Running-the-module"><a class="docs-heading-anchor" href="#Running-the-module">Running the module</a><a id="Running-the-module-1"></a><a class="docs-heading-anchor-permalink" href="#Running-the-module" title="Permalink"></a></h2><p>The <code>Game</code> data structure holds all of the relevant game information. Most of the API of this module takes a <code>::Game</code> value as their first argument. For convenience, this argument can always be omitted; the module will use a global <code>Game</code> structure instead:</p><pre><code class="language-julia hljs">using InfinityEngine
InfinityEngine.init!(&quot;/home/CHARNAME/baldursgate&quot;)
InfinityEngine.game()</code></pre><article class="docstring"><header><a class="docstring-binding" id="InfinityEngine.Game" href="#InfinityEngine.Game"><code>InfinityEngine.Game</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Game</code></pre><p>Main structure holding all top-level data for a game installation, including:</p><ul><li>resource repository (three kinds: key/bif, override, memory database of modified resources);</li><li>tlk strings,</li><li>conversion of resource references to 8-byte short references;</li><li>dialog-building context.</li></ul><p>This structure works as a pseudo-dictionary: indexing it with keys of a given <code>Resref</code> type returns data structures of the corresponding resource type.</p><ul><li><code>game[resref]</code>: returns the data structure described by this resource.</li><li><code>get</code> and <code>get!</code> methods, e.g. <code>get(game, resref) do ... end</code></li><li><code>keys(game, type)</code>: returns a vector of all names of existing resources of this type.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/plut/InfinityEngine.jl/blob/ee8889cf6bc1bac6f643f11086d8545eb6917220/src/InfinityEngine.jl#L2190-L2208">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InfinityEngine.init!" href="#InfinityEngine.init!"><code>InfinityEngine.init!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">init!(directory)</code></pre><p>Initializes the global game structure from this directory (the directory containing the <code>chitin.key</code> file).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/plut/InfinityEngine.jl/blob/ee8889cf6bc1bac6f643f11086d8545eb6917220/src/InfinityEngine.jl#L2568-L2572">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="InfinityEngine.commit" href="#InfinityEngine.commit"><code>InfinityEngine.commit</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">commit([game])</code></pre><p>Saves all changed game data to the disk installation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/plut/InfinityEngine.jl/blob/ee8889cf6bc1bac6f643f11086d8545eb6917220/src/InfinityEngine.jl#L2454-L2457">source</a></section></article><h2 id="Accessing-the-database"><a class="docs-heading-anchor" href="#Accessing-the-database">Accessing the database</a><a id="Accessing-the-database-1"></a><a class="docs-heading-anchor-permalink" href="#Accessing-the-database" title="Permalink"></a></h2><p>Accessing resource of a given type can be done via the <code>item</code>, <code>actor</code> etc. functions, and the corresponding iterators in plural form:</p><pre><code class="language-julia hljs">item(&quot;sw1h01&quot;) # bastard sword
for i in items(); #= ... do something... =#; end
actor(&quot;imoen&quot;)</code></pre><p>Game objects are handled as ordinary Julia structures:</p><pre><code class="language-julia hljs">albruin = item(&quot;sw1h34&quot;) # long sword Albruin
albruin.min_strength = 15 # silently marks the item for commit</code></pre><p>The assignment operators are silently overloaded so that they mark all modified game objects for commit to the <code>override</code> directory.</p><h2 id="Resource-references-and-namespaces"><a class="docs-heading-anchor" href="#Resource-references-and-namespaces">Resource references and namespaces</a><a id="Resource-references-and-namespaces-1"></a><a class="docs-heading-anchor-permalink" href="#Resource-references-and-namespaces" title="Permalink"></a></h2><p>From the user point of view, resources are always referred to by strings. The module implements resource namespaces to prevent interference between different authors. Internally, each resource string is prefixed by a namespace, in the form <code>&quot;namespace/resource&quot;</code>. The current namespace is set by the <code>namespace()</code> function.</p><article class="docstring"><header><a class="docstring-binding" id="InfinityEngine.namespace" href="#InfinityEngine.namespace"><code>InfinityEngine.namespace</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">namespace([game], s)</code></pre><p>Sets the current namespace for game resources being defined to <code>s</code>. The following default namespaces are used:</p><ul><li><code>&quot;&quot;</code> for original game resources;</li><li><code>&quot;user&quot;</code> is the default namespace for added resources.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/plut/InfinityEngine.jl/blob/ee8889cf6bc1bac6f643f11086d8545eb6917220/src/InfinityEngine.jl#L2239-L2246">source</a></section></article><p>The empty namespace <code>&quot;&quot;</code> corresponds to resources handled outside of this module (e.g. original game resources). At module initialization, the namespace is set to <code>&quot;user&quot;</code>.</p><p>A resource string can therefore take the following form:</p><ul><li><code>&quot;resource&quot;</code> will look for an existing resource first in the current namespace, then (if not found) in the root namespace, and if not found there, it will use the current namespace;</li><li><code>&quot;ns/resource&quot;</code> identifies a resource in namespace <code>&quot;ns&quot;</code>;</li><li>in particular, <code>&quot;/resource&quot;</code> explicitly identifies a resource in the root namespace.</li></ul><h2 id="Languages"><a class="docs-heading-anchor" href="#Languages">Languages</a><a id="Languages-1"></a><a class="docs-heading-anchor-permalink" href="#Languages" title="Permalink"></a></h2><p>Game strings are strings which will be displayed by the game engine and which will be translated on the way. Everywhere a game string is required (in dialogs, item names and descriptions, etc.) the string must be entered in the source in the form <code>_&quot;string&quot;</code>; the leading underscore marks this string for translation (à la <code>gettext</code>).</p><p>These strings are converted to <code>Strref</code> (numeric string references) on the fly when assigned to relevant parts of game structures (for example as object properties or dialog texts). Translations for the strings are loaded from <code>.po</code> files (in the standard format used by <code>gettext</code>, with tiny adaptations for gendered languages), loaded by the <code>load_translations!</code> function</p><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>load_translations!</code>. Check Documenter&#39;s build log for details.</p></div></div><p>and saved in all <code>dialog.tlk</code> and <code>dialogF.tlk</code> files. For strings for which no translation is provided, the string itself will be used instead.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="items/">Items »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Sunday 18 September 2022 21:45">Sunday 18 September 2022</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
